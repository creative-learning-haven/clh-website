---
import SecondaryPage from '../layouts/SecondaryPage.astro';
---

<SecondaryPage title="Contact">
	<div class="contact-content">
		<div class="contact-info">
			<h2>Get in Touch</h2>
			<p>We'd love to hear from you! Send us a message and we'll respond as soon as possible.</p>
			
			<div class="contact-details">
				<div class="contact-item">
					<h3>Email</h3>
					<p><a href="mailto:creativelearninghaven.ug@gmail.com">creativelearninghaven.ug@gmail.com</a></p>
				</div>
				
				<div class="contact-item">
					<h3>Location</h3>
					<p>Rhino and Imvepi Refugee Settlements, Uganda</p>
				</div>
			</div>
		</div>
		
		<div class="contact-form-container">
			<h3>Send us a Message</h3>
			<form class="contact-form" method="POST" data-netlify="true">
				<input type="hidden" name="form-name" value="contact-form" />
				<div class="form-group">
					<label for="name">Name *</label>
					<input type="text" id="name" name="name" required />
				</div>
				
				<div class="form-group">
					<label for="email">Email *</label>
					<input type="email" id="email" name="email" required />
				</div>
				
				<div class="form-group">
					<label for="subject">Subject</label>
					<input type="text" id="subject" name="subject" />
				</div>
				
				<div class="form-group">
					<label for="message">Message *</label>
					<textarea id="message" name="message" rows="5" required></textarea>
				</div>
				
				<button type="submit" class="submit-btn">Send Message</button>
			</form>
			<div class="form-message" id="contact-form-message"></div>
		</div>
	</div>
</SecondaryPage>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		const form = document.querySelector('.contact-form') as HTMLFormElement;
		const messageDiv = document.getElementById('contact-form-message');
		
		if (!form || !messageDiv) return;
		
		form.addEventListener('submit', async function(e) {
			e.preventDefault();
			
			const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
			
			if (!submitButton) return;
			
			// Show loading state
			submitButton.textContent = 'Sending...';
			submitButton.disabled = true;
			messageDiv.textContent = '';
			
			try {
				// Submit form data
				const formData = new FormData(form);
				const response = await fetch('/contact', {
					method: 'POST',
					body: formData
				});
				
				if (response.ok) {
					messageDiv.textContent = 'Thank you for your message! We\'ll get back to you soon.';
					messageDiv.className = 'form-message success';
					form.reset();
				} else {
					throw new Error('Submission failed');
				}
			} catch (error) {
				messageDiv.textContent = 'Something went wrong. Please try again.';
				messageDiv.className = 'form-message error';
			} finally {
				submitButton.textContent = 'Send Message';
				submitButton.disabled = false;
			}
		});
	});
</script>

<style>
	.contact-content {
		max-width: 800px;
		margin: 0 auto;
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 48px;
		padding: 32px 0;
	}
	
	.contact-info h2 {
		margin-bottom: 16px;
		color: var(--color-ink);
	}
	
	.contact-info p {
		margin-bottom: 32px;
		color: var(--color-ink-strong);
		line-height: 1.6;
	}
	
	.contact-details {
		display: flex;
		flex-direction: column;
		gap: 24px;
	}
	
	.contact-item h3 {
		margin: 0 0 8px;
		font-size: 1.1em;
		color: var(--color-ink);
	}
	
	.contact-item p {
		margin: 0;
		color: var(--color-ink-strong);
	}
	
	.contact-item a {
		color: var(--color-link-strong);
		text-decoration: none;
	}
	
	.contact-item a:hover {
		text-decoration: underline;
	}
	
	.contact-form-container h3 {
		margin-bottom: 24px;
		color: var(--color-ink);
	}
	
	.contact-form {
		display: flex;
		flex-direction: column;
		gap: 20px;
	}
	
	.form-group {
		display: flex;
		flex-direction: column;
		gap: 8px;
	}
	
	.form-group label {
		font-weight: 600;
		color: var(--color-ink);
		font-size: 0.9em;
	}
	
	.form-group input,
	.form-group textarea {
		padding: 12px;
		border: 1px solid var(--section-light);
		border-radius: 6px;
		font-family: inherit;
		font-size: 1em;
		background: white;
		color: var(--color-ink);
	}
	
	.form-group input:focus,
	.form-group textarea:focus {
		outline: none;
		border-color: var(--color-accent);
		box-shadow: 0 0 0 3px rgba(143, 224, 196, 0.1);
	}
	
	.submit-btn {
		background: var(--color-accent);
		color: var(--color-teal-ink);
		border: 0;
		border-radius: 8px;
		padding: 14px 24px;
		font-weight: 800;
		font-size: 1em;
		cursor: pointer;
		transition: background-color 0.2s ease;
		margin-top: 8px;
	}
	
	.submit-btn:hover {
		background: var(--color-donate-hover);
	}
	
	.submit-btn:disabled {
		opacity: 0.7;
		cursor: not-allowed;
	}
	
	.form-message {
		margin-top: 16px;
		padding: 12px 16px;
		border-radius: 6px;
		font-size: 0.9em;
		text-align: center;
	}
	
	.form-message.success {
		background: rgba(139, 230, 196, 0.2);
		color: #0a3730;
		border: 1px solid rgba(139, 230, 196, 0.4);
	}
	
	.form-message.error {
		background: rgba(207, 91, 79, 0.2);
		color: #c0453b;
		border: 1px solid rgba(207, 91, 79, 0.4);
	}
	
	@media (max-width: 768px) {
		.contact-content {
			grid-template-columns: 1fr;
			gap: 32px;
			padding: 24px 16px;
		}
	}
</style>



