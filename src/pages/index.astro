---
import Layout from '../layouts/Layout.astro';
import heroImg from '../assets/P1090543.jpg';
import groupStudyImg from '../assets/group_study.avif';
import InstagramEmbeds from '../components/InstagramEmbeds.astro';
---

<Layout>
	{/* Toast notification for successful subscription */}
	<div id="toast" class="toast toast-success" style="display: none;">
		<div class="toast-content">
			<span class="toast-icon">✓</span>
			<div class="toast-message">
				<strong>Thank you for subscribing!</strong>
				<p>We've added <span class="email-highlight" id="subscriber-email"></span> to our newsletter list.</p>
			</div>
		</div>
	</div>

	<section class="hero" style={`--hero-image: url(${heroImg.src})`}>
		<div class="hero-inner">
			<h1>
				<span>Knowledge is</span>
				<span class="line2">Peace</span>
			</h1>
			<p class="tagline">Creative Learning Haven is building libraries in Uganda's Rhino and Imvepi Refugee Settlements. Free access to reading and creative activities will change the futures of refugees and local communities in Uganda.</p>
		</div>
	</section>

	<section class="cards-section">
		<div class="cards-container">
			<div class="text-column">
				<h3>Our Mission</h3>
				<p>Uganda's Imvepi and Rhino refugee settlements were established to shelter people fleeing conflict in South Sudan. Today, one of the greatest needs that these communities face is access to education and reading. Creative Learning Haven was founded to meet this need by creating libraries and learning spaces, run by members ofthe communities they serve.</p>
				<br/>
				<!-- <a href="/about">Learn More About Who We Are →</a> -->
			</div>
			
			<div class="text-column">
				<h3>Support Us</h3>
				<p>Our libraries and activities are entirely crowd-funded. We have already reached 800+ people and transported 1,500+ books. With your help, we can continue to provide educational resources and creative activities for these communities.</p>
				<br/>
				<a href="/support-us" class="learn-more-btn">Learn How You Can Help →</a>
			</div>
		</div>
	</section>

	<!-- <h2 class="activities-title">OUR ACTIVITIES</h2> -->

	<section class="activity-section">
		<div class="activity-content">
			<div class="activity-text">
				<h3>Our Mission</h3>
				<p>Uganda's Imvepi and Rhino refugee settlements were established to shelter people fleeing conflict in South Sudan. Today, one of the greatest needs that these communities face is access to education and reading. Creative Learning Haven was founded to meet this need by creating libraries and learning spaces, run by members ofthe communities they serve.</p>
				<a href="/about" class="learn-more-btn">Learn More About Who We Are</a> 
			</div>
			<div class="activity-images">
				<img src={groupStudyImg.src} alt="Our Mission" />
			</div>
		</div>
	</section>

	<section class="activity-section">
		<div class="activity-content reverse">
			<div class="activity-text">
				<h3>Literacy Class</h3>
				<p>Schools in the settlements can have as many as 300 students per teacher. Many primary schoolers don't get the literacy education they need. To fill the gap, we offer literacy classes for students in primary 3 to 5. We cover the alphabet, basic phonics, and use the <a href="https://readinguniverse.org/article/explore-teaching-topics/features-of-structured-literacy-instruction/what-is-structured-literacy" target="_blank">Structured Literacy</a> approach. This way, students can benefit from the books in our libraries and beyond.</p>
			</div>
			<div class="activity-images">
				<div class="image-collage">
					<div class="image-placeholder">Image 1</div>
					<div class="image-placeholder">Image 2</div>
					<div class="image-placeholder">Image 3</div>
					<div class="image-placeholder">Image 4</div>
				</div>
			</div>
		</div>
	</section>

	<section class="activity-section">
		<div class="activity-content">
			<div class="activity-text">
				<h3>Creative Arts</h3>
				<p>Visitors to our libraries want to draw, take photos, write, and tell stories. However, these activities have been historically undervalued in the settlements. We create space for art and creativity not only for the mental health benefits they provide, but to preserve the voices and stories of Imvepi and Rhino for future generations.</p>
			</div>
			<div class="activity-images">
				<div class="image-collage">
					<div class="image-placeholder">Image 1</div>
					<div class="image-placeholder">Image 2</div>
					<div class="image-placeholder">Image 3</div>
					<div class="image-placeholder">Image 4</div>
				</div>
			</div>
		</div>
	</section>

		<section class="activity-section">
		<div class="activity-content reverse">
			<div class="activity-text">
				<h3>Women's Group</h3>
				<p>82% of refugees in the Imvepi and Rhino settlements are women and children. To address the needs of the women and girls in these communities, we have creative arts and income-generating activities for women. We will soon begin offering literacy classes for women as well.</p>
			</div>
			<div class="activity-images">
				<div class="image-collage">
					<div class="image-placeholder">Image 1</div>
					<div class="image-placeholder">Image 2</div>
					<div class="image-placeholder">Image 3</div>
					<div class="image-placeholder">Image 4</div>
				</div>
			</div>
		</div>
	</section>


	<script>
		// Check URL parameters and show toast if user just subscribed
		document.addEventListener('DOMContentLoaded', function() {
			const url = new URL(window.location.href);
			const subscribed = url.searchParams.get('subscribed');
			const email = url.searchParams.get('email');
			
			const toast = document.getElementById('toast');
			const emailSpan = document.getElementById('subscriber-email');
			
			if (subscribed === 'true' && email && toast && emailSpan) {
				// Set the email in the toast
				emailSpan.textContent = email;
				
				// Show the toast
				toast.style.display = 'block';
				
				// Auto-hide after 5 seconds
				setTimeout(() => {
					toast.classList.add('hiding');
					setTimeout(() => {
						toast.style.display = 'none';
						toast.classList.remove('hiding');
					}, 300); // Wait for animation to complete
				}, 5000); // Hide after 5 seconds
			}
		});
	</script>
</Layout>

<style>
	.hero {
		position: relative;
		min-height: 40vh;
		/* top: fade into white; middle: dark overlay; bottom: image */
		background-image:
			linear-gradient(180deg, var(--overlay-dark) 0%, var(--overlay-dark) 100%),
			var(--hero-image);
		background-size: 100% 100%, 100% 100%, 100% auto; /* overlays cover, image fits width */
		background-position: center top, center top, center top;
		background-repeat: no-repeat, no-repeat, no-repeat;
		color: white;
		display: grid;
		place-items: center;
		z-index: 0;
	}

	.hero-inner {
		max-width: 940px;
		padding: 4vh 16px 5vh;
		text-align: center;
	}

	/* Staggered rise-in animation for hero content (slower + stronger) */
	.hero-inner > * {
		opacity: 0;
		transform: translateY(100px);
		animation: riseIn 1.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
	}

	.hero-inner > *:nth-child(1) { animation-delay: .15s; }
	.hero-inner > *:nth-child(2) { animation-delay: .35s; }
	.hero-inner > *:nth-child(3) { animation-delay: .55s; }

	@keyframes riseIn {
		from { opacity: 0; transform: translateY(60px); filter: blur(4px); }
		to { opacity: 1; transform: translateY(0); filter: blur(0); }
	}

	@media (prefers-reduced-motion: reduce) {
		.hero-inner > * { animation: none; opacity: 1; transform: none; filter: none; }
	}

	/* Cards Section Styles */
	.cards-section {
		padding: 60px 16px;
		background: var(--section-light);
	}

	.cards-container {
		max-width: 1200px;
		margin: 0 auto;
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 60px;
		position: relative;
	}

	.cards-container::after {
		content: '';
		position: absolute;
		left: 50%;
		top: 0;
		bottom: 0;
		width: 2px;
		background: var(--color-subscribe-dark);
		opacity: 0.3;
		transform: translateX(-50%);
	}

	.text-column h3 {
		font-size: 24px;
		margin: 0 0 20px 0;
		color: var(--color-subscribe-dark);
		font-family: 'Lulo Clean Custom', 'Avenir Custom', Avenir, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
		text-transform: uppercase;
	}

	.text-column p {
		font-size: 18px;
		line-height: 1.7;
		color: var(--color-text);
		margin: 0;
	}

	.text-column ul {
		list-style-type: disc;
		padding-left: 20px;
		font-size: 18px;
		line-height: 1.7;
		color: var(--color-text);
		margin: 0;
	}

	.button-container {
		text-align: center;
		margin-top: 20px;
	}

	@media (max-width: 900px) {
		.cards-container {
			grid-template-columns: 1fr;
			gap: 40px;
		}
	}

	@media (max-width: 600px) {
		.cards-section {
			padding: 40px 16px;
		}
		
		.text-column h3 {
			font-size: 20px;
		}
		
		.text-column p {
			font-size: 16px;
		}
	}

	.tagline {
		display: inline-block;
		font-size: 1.2em;
		max-width: 700px;
		padding: 8px 14px;
		border-radius: 10px;
		letter-spacing: .08em;
		font-weight: 800; // uses Avenir Heavy
	}

	h1 {
		margin: 10px 0 6px;
		/* font-size: clamp(34px, 7vw, 76px); */
		font-size: 50px;
		line-height: 0.95;
		text-transform: uppercase;
	}

	.line2 { display: block; font-size: 1.1em; }

	.subtitle {
		max-width: 780px;
		margin: 12px auto 0;
		font-size: clamp(16px, 2.2vw, 20px);
		color: var(--white-strong);
		text-shadow: 0 1px 2px rgba(0,0,0,0.25);
	}

	.panels {
		display: grid;
		/* Left column wider than right; right ≈ 60% of left (5:3 ratio) */
		grid-template-columns: 5fr 3fr;
		grid-template-rows: auto auto;
		gap: 0;
		max-width: 98%;
		margin: 16px auto 0;
		padding: 0 16px;
		position: relative;
		z-index: 1;
	}

	.panel { padding: 36px 32px; min-height: 280px; }

	.mission { background: var(--section-light); }

	.pledge {
		background: var(--color-pledge-red);
		color: var(--color-pledge-red-text);
		display: grid;
		place-items: center;
		text-align: center;
	}

	.pledge .cta {
		background: var(--color-white);
		color: var(--color-pledge-cta-text);
		text-decoration: none;
		font-weight: 800;
		padding: 12px 18px;
		border-radius: 999px;
		box-shadow: inset 0 -2px 0 rgba(0,0,0,.2);
		transition: background .2s ease, color .2s ease, border-color .2s ease;
	}

	.pledge .cta:hover,
	.pledge .cta:focus-visible { background: var(--section-light); color: var(--color-pledge-cta-text); }

	.socials { background: var(--color-socials-green); color: var(--color-teal-ink); }
	.socials .link { color: var(--color-teal-ink); font-weight: 700; }

	.subscribe { background: var(--color-subscribe-dark); color: var(--color-subscribe-foreground); }
	.subscribe-form { display: flex; gap: 8px; margin-top: 8px; }
	.subscribe-form input {
		flex: 1;
		min-width: 0;
		padding: 10px 12px;
		border-radius: 8px;
		border: 1px solid var(--color-subscribe-input-border);
		background: var(--color-subscribe-input-bg);
		color: var(--color-subscribe-input-text);
	}
	.subscribe-form button {
		background: var(--color-accent);
		color: var(--color-teal-ink);
		border: 0;
		border-radius: 8px;
		padding: 10px 14px;
		font-weight: 800;
	}

	.link { display: inline-block; margin-top: 12px; font-weight: 700; color: var(--color-link-strong); }

	@media (max-width: 900px) {
		.panels { grid-template-columns: 1fr; }
		.panel { min-height: 220px; }
	}

	.activities-title {
		margin: 24px auto 0;
		text-align: center;
		color: var(--color-subscribe-dark);
		font-family: 'Lulo Clean Custom', 'Avenir Custom', Avenir, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
		text-transform: uppercase;
		/* letter-spacing: .18em; */
		font-size: clamp(18px, 5em, 40px);
	}

	/* Toast notification styles */
	.toast {
		position: fixed;
		top: 80px; /* Below the navbar */
		left: 50%;
		transform: translateX(-50%);
		z-index: 1000;
		max-width: 90vw;
		width: 400px;
		border-radius: 12px;
		box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
		animation: toastSlideIn 0.3s ease-out;
	}

	.toast-success {
		background: linear-gradient(135deg, #4ade80, #22c55e);
		color: white;
		border: 1px solid #16a34a;
	}

	.toast-content {
		display: flex;
		align-items: flex-start;
		gap: 12px;
		padding: 16px 20px;
	}

	.toast-icon {
		font-size: 20px;
		font-weight: bold;
		color: white;
		flex-shrink: 0;
		margin-top: 2px;
	}

	.toast-message {
		flex: 1;
	}

	.toast-message strong {
		display: block;
		font-size: 16px;
		margin-bottom: 4px;
	}

	.toast-message p {
		margin: 0;
		font-size: 14px;
		opacity: 0.95;
		line-height: 1.4;
	}

	.email-highlight {
		background: rgba(255, 255, 255, 0.2);
		padding: 2px 6px;
		border-radius: 4px;
		font-family: monospace;
		font-weight: 600;
	}

	@keyframes toastSlideIn {
		from {
			opacity: 0;
			transform: translateX(-50%) translateY(-20px);
		}
		to {
			opacity: 1;
			transform: translateX(-50%) translateY(0);
		}
	}

	@keyframes toastSlideOut {
		from {
			opacity: 1;
			transform: translateX(-50%) translateY(0);
		}
		to {
			opacity: 0;
			transform: translateX(-50%) translateY(-20px);
		}
	}

	.toast.hiding {
		animation: toastSlideOut 0.3s ease-in forwards;
	}

	/* Activity sections styles */
	.activity-section {
		margin: 60px auto;
		max-width: 1200px;
		padding: 0 16px;
	}

	.activity-content {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 60px;
		align-items: center;
	}

	.activity-content.reverse {
		direction: rtl;
	}

	.activity-content.reverse > * {
		direction: ltr;
	}

	.activity-text h3 {
		font-size: clamp(14px, 2vw, 28px);
		margin-bottom: 20px;
		color: var(--color-subscribe-dark);
		font-family: 'Lulo Clean Custom', 'Avenir Custom', Avenir, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
		text-transform: uppercase;
	}

	.activity-text p {
		font-size: 18px;
		line-height: 1.6;
		color: var(--color-text);
		margin: 0;
	}

	.learn-more-btn {
		display: inline-block;
		margin-top: 20px;
		padding: 12px 24px;
		background: var(--color-subscribe-dark);
		color: white;
		text-decoration: none;
		border-radius: 8px;
		font-weight: 700;
		transition: all 0.2s ease;
		box-shadow: 0 2px 4px rgba(0,0,0,0.1);
	}

	.learn-more-btn:hover {
		background: var(--color-accent);
		transform: translateY(-2px);
		box-shadow: 0 4px 8px rgba(0,0,0,0.15);
	}

	.activity-images {
		display: flex;
		justify-content: center;
		align-items: center;
	}

	.image-collage {
		display: grid;
		grid-template-columns: 1fr 1fr;
		grid-template-rows: 1fr 1fr;
		gap: 12px;
		width: 100%;
		max-width: 400px;
		aspect-ratio: 1;
	}

	.image-placeholder {
		background: var(--section-light);
		border: 2px dashed var(--color-subscribe-dark);
		border-radius: 8px;
		display: flex;
		align-items: center;
		justify-content: center;
		color: var(--color-subscribe-dark);
		font-weight: 600;
		font-size: 14px;
		transition: all 0.2s ease;
	}

	.learn-more-btn {
		display: inline-block;
		margin-top: 20px;
		padding: 12px 24px;
		background: var(--color-subscribe-dark);
		color: white;
		text-decoration: none;
		border-radius: 8px;
		font-weight: 700;
		transition: all 0.2s ease;
		box-shadow: 0 2px 4px rgba(0,0,0,0.1);
	}

	.learn-more-btn:hover {
		background: var(--color-accent);
		transform: translateY(-2px);
		box-shadow: 0 4px 8px rgba(0,0,0,0.15);
	}

	@media (max-width: 768px) {
		.activity-content {
			grid-template-columns: 1fr;
			gap: 40px;
		}

		.activity-content.reverse {
			direction: ltr;
		}

		.activity-section {
			margin: 40px auto;
		}

		.image-collage {
			max-width: 300px;
		}
	}
</style>
